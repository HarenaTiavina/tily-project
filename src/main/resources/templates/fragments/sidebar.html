<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<!-- Fragment: Sidebar du dashboard -->
<aside th:fragment="sidebar(activePage)" class="sidebar" id="sidebar">
    <div class="sidebar-header">
        <button class="sidebar-toggle" onclick="toggleSidebarCollapse()" title="Ahena/Ampitombo">
            <i class="fas fa-chevron-left"></i>
        </button>
    </div>
    <nav class="sidebar-nav">
        <!-- Menu commun (ADMIN et USER) -->
        <a th:href="@{/dashboard}" class="nav-item" th:classappend="${activePage == 'dashboard'} ? 'active'" data-tooltip="Dashboard">
            <i class="fas fa-home"></i>
            <span class="nav-text">Dashboard</span>
        </a>
        <a th:href="@{/responsables}" class="nav-item" th:classappend="${activePage == 'responsables'} ? 'active'" data-tooltip="Mpiandraikitra">
            <i class="fas fa-user-tie"></i>
            <span class="nav-text">Mpiandraikitra</span>
        </a>
        <a th:href="@{/eleves}" class="nav-item" th:classappend="${activePage == 'eleves'} ? 'active'" data-tooltip="Beazina">
            <i class="fas fa-user-graduate"></i>
            <span class="nav-text">Beazina</span>
        </a>
        
        <!-- Menu ADMIN uniquement -->
        <div sec:authorize="hasRole('ADMIN')">
            <a th:href="@{/admin/utilisateurs}" class="nav-item" th:classappend="${activePage == 'utilisateurs'} ? 'active'" data-tooltip="Mpampiasa">
                <i class="fas fa-users-cog"></i>
                <span class="nav-text">Mpampiasa</span>
            </a>
        </div>
    </nav>
    <div class="sidebar-footer">
        <form th:action="@{/logout}" method="post" class="logout-form">
            <button type="submit" class="nav-item logout-btn" data-tooltip="Fialana">
                <i class="fas fa-sign-out-alt"></i>
                <span class="nav-text">Fialana</span>
            </button>
        </form>
    </div>
</aside>

</html>
